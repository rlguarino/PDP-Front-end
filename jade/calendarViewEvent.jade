extends !templates/basic.jade

block script 
	script(type='text/javascript')
		$(document).ready(function() {
			
			var eventId = getQueryVariable("event");

			$.ajax({
					type: "POST",
					url: rootLoc + "/calendar/getevent",
					data: "event_uid=" + eventId,
					cache: false,
					success: function(result) {
						console.log(result);
						result = $.parseJSON(result);
						console.log(typeof result);
						console.log(result["title"]);
						console.log(result['location']);
						console.log(result['start']);
						console.log(result['end']);
						console.log(result['registration_start']);
						console.log(result['registration_end']);
						console.log(result['approval_start']);
						console.log(result['approval_end']);
						console.log(result['description']);

						//Prefill the boxes
						var form = $( "#editEventForm" );
						form.find( "p[id='title']" ).val(result['title']);
						form.find( "p[id='loc']" ).val(result['location']);
						form.find( "p[id='startTime']" ).val(result['start']);
						form.find( "p[id='endTime']" ).val(result['end']);
						form.find( "p[id='startTimeReg']" ).val(result['registration_start']);
						form.find( "p[id='endTimeReg']" ).val(result['registration_end']);
						form.find( "p[id='startTimeApprove']" ).val(result['approval_start']);
						form.find( "p[id='endTimeApprove']" ).val(result['registration_end']);
						$("#description" ).val(result['description']);
					},
					error: function(XMLHttpRequest, textStatus, errorThrown) { 
						console.log("Status: " + textStatus); 
						console.log("Error: " + errorThrown); 
					}
				});
			
block nav
	+nav('Calendar')

block main
	div.block.onehalf.center
		h2 View Event
		form.content.center
			label(for='title') Event Title:
			p(id='title')

			label(for='loc') Event Location:
			p(id='loc')

			label(for='startTime') Event Start Time:
			p(id='startTime')

			label(for='endTime') Event End Time:
			p(id='endTime')

			label(for='startTimeReg') Registration Start Time:
			p(id='startTimeReg')

			label(for='endTimeReg') Registration End Time:
			p(id='endTimeReg')

			label(for='startTimeApprove') Approval Start Time:
			p(id='startTimeApprove')

			label(for='endTimeApprove') Approval End Time:
			p(id='endTimeApprove')

			label(for='description') Event Description:
			p(id='description')